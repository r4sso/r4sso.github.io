(()=>{document.addEventListener("DOMContentLoaded",function(){let i=document.getElementById("search"),x=document.querySelector(".search-result"),d=i.elements.q;function f(t){t=t.trim(),fetch("/index.json").then(n=>n.json()).then(n=>{let m=n.filter(o=>{let e=o.content.toLowerCase().trim(),h=o.title.toLowerCase().trim();return e.includes(t)||h.includes(t)}),l="";t!==""&&m.length>0?m.forEach(o=>{let e=o.content.toLowerCase(),h=o.title.toLowerCase(),u=M=>M.replace(new RegExp(t,"gi"),w=>`<span class="text-yellow-500">${w}</span>`),s=130,C=e.split(" "),a=e.indexOf(t),c=Math.max(0,a-Math.floor(s/2)),r=Math.min(e.length,a+Math.floor(s/2));c===0?r=Math.min(r+(Math.floor(s/2)-a),e.length):r===e.length&&(c=Math.max(0,c-(Math.floor(s/2)-(e.length-a-1))));let g=e.substring(c,r),p=u(g),L=u(h);l+=`<a href="${o.href}"><div class="mt-4 post-card dark:post-card-dark px-3 py-6 rounded-md shadow-2xl shadow-slate-700/10"><h2 class="text-xl font-semibold">${L}</h2><p class="text-gray-600 dark:text-gray-400 text-sm">${p}</p></div></a>`}):t!==""&&(l="<p class='mt-4 text-center'>No results found.</p>"),x.innerHTML=l}).catch(n=>{console.error("Error fetching search index:",n)})}d.addEventListener("input",function(){let t=this.value.toLowerCase();f(t)}),i.addEventListener("submit",function(t){t.preventDefault();let n=d.value.toLowerCase();f(n)})});})();
